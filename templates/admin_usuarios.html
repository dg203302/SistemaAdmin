<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administrar usuarios</title>
    <!-- Dise√±o base -->
    <link rel="stylesheet" href="/estilo_prueba.css">
    <!-- Estilos espec√≠ficos de la p√°gina -->
    <link rel="stylesheet" href="/styles/admin_usuarios.css">
    <link rel="preload" as="image" href="/logo_lote.png">
</head>
<body>
    <div class="layout">
        <header class="topbar" role="banner">
            <div class="brand">
                <img src="/logo_lote.png" alt="Logo_lote" style="max-width: 10%; max-height: 10%; object-fit: contain;">
                <span class="brand__name">Administraci√≥n Usuarios</span>
            </div>
            <div class="topbar__spacer"></div>
            <a class="btn" href="/templates/pagina_inicio.html">üè†Ô∏é</a>
            <nav aria-label="Ayuda">
                <a class="btn ghost small" href="mailto:diegogarcia479@yahoo.com.ar, juanpi9landa@gmail.com?subject=Admin%20Usuarios">Ayuda</a>
            </nav>
        </header>

        <main class="content">
            <div class="page-header">
                <div>
                    <h1>Usuarios</h1>
                    <div class="muted">Busca por tel√©fono o por nombre (prefijo)</div>
                </div>
                <div class="page-actions admin-toolbar" role="group" aria-label="B√∫squeda y acciones">
                    <input id="q" class="input" type="text" placeholder="264xxxxxxx o nombre (p.ej. juan)" aria-label="Buscar usuario" />
                    <button id="btnBuscar" class="btn primary" type="button">Buscar</button>
                    <button id="btnVerTodos" class="btn" type="button">Ver todos</button>
                    <div style="flex:1"></div>
                    <button id="btnAgregar" class="btn" type="button">Agregar usuario</button>
                </div>
            </div>

            <section id="usuariosSection" class="card" hidden>
                <div class="card__header">
                    <h2 class="section-title" id="usuariosTitle">Resultados</h2>
                </div>
                <div class="table-wrap">
                    <table class="table" aria-describedby="usuariosTitle">
                        <thead>
                            <tr>
                                <th>Nombre</th>
                                <th>Tel√©fono</th>
                                <th>Puntos</th>
                                <th class="hide-sm">Creaci√≥n</th>
                                <th class="right" style="text-align: center;">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="usuariosBody"></tbody>
                    </table>
                </div>
            </section>
            
            <section id="crearUsuarioSection" class="card" hidden>
                <div class="card__header">
                    <h2 class="section-title">Crear nuevo usuario</h2>
                    <button class="btn ghost" type="button" id="btnCerrarAgregar">Cancelar</button>
                </div>

                <form id="crearUsuarioForm" autocomplete="off" novalidate>
                    <div class="form-row">
                        <label for="cuNombre">Nombre</label>
                        <input id="cuNombre" name="nombre" class="input" type="text" placeholder="Nombre y apellido" required>
                    </div>

                    <div class="form-row">
                        <label for="cuTelefono">Nro de tel√©fono</label>
                        <input id="cuTelefono" name="telefono" class="input" type="tel" inputmode="numeric" pattern="[0-9]{7,15}" placeholder="Solo n√∫meros" required>
                        <small class="muted">Solo n√∫meros, sin espacios ni guiones.</small>
                    </div>

                    <div class="form-row">
                        <label for="cuPassword">Contrase√±a</label>
                        <input id="cuPassword" name="password" class="input" type="password" minlength="6" placeholder="M√≠nimo 6 caracteres" required>
                    </div>

                    <fieldset class="form-row">
                        <legend>Respuestas a preguntas de seguridad</legend>
                        <div>
                            <label for="cuSeg1">¬øCu√°l es el nombre de tu primera mascota?</label>
                            <input id="cuSeg1" name="respuesta1" class="input" type="text" required>
                        </div>
                        <div>
                            <label for="cuSeg2">¬øEn qu√© ciudad naciste?</label>
                            <input id="cuSeg2" name="respuesta2" class="input" type="text" required>
                        </div>
                        <div>
                            <label for="cuSeg3">¬øCu√°l es tu pel√≠cula favorita?</label>
                            <input id="cuSeg3" name="respuesta3" class="input" type="text" required>
                        </div>
                    </fieldset>

                    <div class="form-actions" style="margin-top: 0.75rem; display: flex; gap: 0.5rem;">
                        <button id="btnCrearUsuario" class="btn primary" type="submit">Guardar</button>
                        <button class="btn ghost" type="reset">Limpiar</button>
                    </div>
                </form>
            </section>
            
        </main>

        <footer class="footer" role="contentinfo">
            <small>¬©<span id="y"></span> Todos los derechos reservados.</small>
        </footer>
    </div>

        <script>
            // Toggle mostrar/ocultar contrase√±a sin interferir con script_inicio.js
            (function () {
                const y = document.getElementById('y');
                if (y) y.textContent = new Date().getFullYear();
            })();
        </script>

    <!-- Supabase CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Config (claves) compartida con admin_publicaciones -->
    <script src="../scripts/config.js"></script>
    <!-- L√≥gica de la p√°gina -->
    <script type="module" src="../scripts/admin_usuarios.js"></script>
</body>
</html>